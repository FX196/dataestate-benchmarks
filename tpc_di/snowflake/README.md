# TPC-DI Benchmark Repository

This repository hosts the TPC-DI benchmark, which is a decision support benchmark provided by the Transaction Processing Performance Council (TPC). The TPC-DI benchmark measures the performance of systems that provide decision support using a mix of complex queries and data modifications.

## About TPC-DI

TPC-DI stands for Transaction Processing Performance Council Decision Support (DI) benchmark. It is designed to evaluate the performance of decision support systems that perform complex queries and data modifications in a transactional environment. The benchmark measures the performance of these systems by simulating a data warehouse environment with a mix of business-related queries and updates.

## Purpose of this Repository

The purpose of this repository is to provide a central location for hosting the TPC-DI benchmark and related resources. It serves as a reference for benchmarking decision support systems and allows researchers, developers, and enthusiasts to access the benchmark, run it on their systems, and compare the performance of different implementations.

## Repository Structure

The repository is organized as follows:

- **sql/ddl/**: This directory contains ddl statements to create the benchmark databases, tables, warehouses, and other Snowflake configuration required to run the benchmark code.

- **datagen/**: This directory hosts the TPC datagen tool that generates synthetic data to mimic the real-world decision support system environment for benchmarking purposes.

- **sql/dml/**: This directory contains the DML statements to create procedures and tasks in Snowflake used to run the TPC-DI benchmark.

## Getting Started

To get started with the TPC-DI benchmark, follow these steps:

1. Clone the repository

2. Navigate to the sql/ddl directory and run all the ddl statements (databases, formats, roles, sequences, streams, tables, views, and warehouses) against your Snowflake environment to setup the foundational components for the benchmark. There are bash scripts inside the directory structure to assist in running multiple DDL statements.

3. Navigate to the datagen directory to create the necessary raw data for the benchmark. Generation of the benchmark data is not part of the benchmark but is a required step by TPC to create the required raw data in the various formats. Data should be generated per the documentation and moved to cloud storage that is accessible by Snowflake (ex S3, ADLS). Arrange the files in cloud storage using the directory structure /tpcdi/sf={scale_factor}.

4. Create an external cloud storage stage (ex S3 Stage, Azure Stage) in TPCDI_STG / PUBLIC / TPCDI_FILES to the cloud storage location containing the raw data generated by the TPC data generator.

5. Navigate to the sql/dml directory and run all of the statements to create all of the procedures and tasks. There are bash scripts inside the directory structure to assist in running multiple DDL statements.

6. The benchmark can be run using the sql/dml/PROCS/RUN_ALL_SP() using a scale factor for the procedure (5, 10, 100, 1000, etc). The scale factor determines which raw data will be used in the cloud storage directory structure.

7. Benchmarking repeatedly will require additional commands to truncate tables and recreating streams. An example is found in sql/main.sql and can be used as a guideline to orchestrate benchmark runs.

## Contributing

Contributions to this repository are welcome. If you have an implementation of the TPC-DI benchmark or improvements to the existing implementations, feel free to submit a pull request. Please ensure that your contributions adhere to the guidelines provided in the repository.

## License

The TPC-DI benchmark specifications and documentation are provided by the Transaction Processing Performance Council (TPC) and are subject to their licensing terms. Please refer to the respective files for more information.

The implementations and additional resources provided in this repository are subject to the license specified in the LICENSE file.

## Contact

If you have any questions, suggestions, or issues related to the TPC-DI benchmark or this repository, please create an issue on the repository's issue tracker or contact the repository maintainer.
